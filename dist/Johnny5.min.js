var Johnny5=function(a){"use strict";function b(a){a.scrollTop=a.scrollHeight}function c(a,b,c){var d=document.createElement(a);return d.className=b,d.innerHTML=c,d}function d(a,d){var e;e="robot"===d?w:v;var f=c("span","name",e+":"),g=c("span","phrase",a),h=c("p",d,"");h.appendChild(f),h.appendChild(g),u.appendChild(h),b(u)}function e(a,b){return"function"==typeof a&&a(b)}function f(a,b){return a===b}function g(a,b){for(var c,d=0,g=a.length;g>d;d++){var h=a[d];if(c=a[d].goTo,e(h.answer,b)||f(h.answer,b))break}return q.questions[c]}function h(a){return a instanceof Array==!1?a:a[Math.floor(Math.random()*a.length)]}function i(a,b){var c;a.answers?(c=a.answers,s=a):c=s.answers,a=g(c,b),r=a,d(h(r.phrase),"robot")}function j(a){return 13===a}function k(a){return""===a}function l(){t.value=""}function m(a){setTimeout(function(){i(r,a)},500)}function n(){t.addEventListener("keypress",function(a){var b=t.value;j(a.keyCode)&&!k(b)&&(l(),d(b,"user"),m(b))})}function o(a){q=a.conversation,t=a.input,u=a.output,r=q.questions[q.startPhrase],w=a.robotName,v=a.userName}function p(){d(r.phrase,"robot"),n()}var q,r,s,t,u,v,w;return o(a),{start:p}};