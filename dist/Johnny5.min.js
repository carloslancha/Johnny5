var Johnny5=function(a){"use strict";function b(a){a.scrollTop=a.scrollHeight}function c(a,b,c){var d=document.createElement(a);return d.className=b,d.innerHTML=c,d}function d(a,d){var e;e="robot"===d?u:t;var f=c("span","name",e+":"),g=c("span","phrase",a),h=c("p",d);h.appendChild(f),h.appendChild(g),s.appendChild(h),b(s)}function e(a,b){return"function"==typeof a&&a(b)}function f(a,b){return a===b}function g(a,b){for(var c,d=0,g=a.length;g>d;d++){var h=a[d];if(c=a[d].goTo,e(h.answer,b)||f(h.answer,b))break}return o.questions[c]}function h(a,b){var c;a.answers?(c=a.answers,q=a):c=q.answers,a=g(c,b),p=a,d(p.phrase,"robot")}function i(a){return 13===a}function j(){r.value=""}function k(a){setTimeout(function(){h(p,a)},500)}function l(){r.addEventListener("keypress",function(a){if(i(a.keyCode)){var b=r.value;j(),d(b,"user"),k(b)}})}function m(a){o=a.conversation,r=a.input,s=a.output,p=o.questions[o.startPhrase],u=a.robotName,t=a.userName}function n(){d(p.phrase,"robot"),l()}var o,p,q,r,s,t,u;return m(a),{start:n}};